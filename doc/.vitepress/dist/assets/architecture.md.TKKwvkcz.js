import{_ as a,c as i,o as n,ah as e,ai as l}from"./chunks/framework.B7GeTwzc.js";const g=JSON.parse('{"title":"Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"architecture.md","filePath":"architecture.md","lastUpdated":1762408579000}'),p={name:"architecture.md"};function r(t,s,h,k,c,o){return n(),i("div",null,[...s[0]||(s[0]=[e('<h1 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to “Architecture”">​</a></h1><p>Understanding how Minepanel works under the hood.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to “Overview”">​</a></h2><p>Minepanel is a web-based Minecraft server management panel built with modern technologies. It uses a <strong>microservices architecture</strong> where each component is containerized and communicates through well-defined interfaces.</p><p><img src="'+l+`" alt="Minepanel"></p><h2 id="components" tabindex="-1">Components <a class="header-anchor" href="#components" aria-label="Permalink to “Components”">​</a></h2><h3 id="_1-frontend-next-js" tabindex="-1">1. Frontend (Next.js) <a class="header-anchor" href="#_1-frontend-next-js" aria-label="Permalink to “1. Frontend (Next.js)”">​</a></h3><p><strong>Technology Stack:</strong></p><ul><li><a href="https://nextjs.org/" target="_blank" rel="noreferrer">Next.js 14</a> - React framework</li><li><a href="https://react.dev/" target="_blank" rel="noreferrer">React 18</a> - UI library</li><li><a href="https://www.typescriptlang.org/" target="_blank" rel="noreferrer">TypeScript</a> - Type safety</li><li><a href="https://tailwindcss.com/" target="_blank" rel="noreferrer">TailwindCSS</a> - Styling</li><li><a href="https://ui.shadcn.com/" target="_blank" rel="noreferrer">shadcn/ui</a> - UI components</li><li><a href="https://tanstack.com/query/latest" target="_blank" rel="noreferrer">React Query</a> - Data fetching</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Render the web interface</li><li>Handle user interactions</li><li>Manage application state</li><li>Make API calls to backend</li><li>Display real-time data</li><li>Route management</li></ul><p><strong>Key Features:</strong></p><ul><li>Server-side rendering (SSR) for fast initial load</li><li>Static generation for optimal performance</li><li>Client-side routing for smooth navigation</li><li>Real-time updates without page refresh</li><li>Responsive design for all devices</li></ul><p><strong>Directory Structure:</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>frontend/</span></span>
<span class="line"><span>├── src/</span></span>
<span class="line"><span>│   ├── app/              # Next.js 14 App Router</span></span>
<span class="line"><span>│   │   ├── page.tsx      # Home page</span></span>
<span class="line"><span>│   │   ├── layout.tsx    # Root layout</span></span>
<span class="line"><span>│   │   └── dashboard/    # Dashboard pages</span></span>
<span class="line"><span>│   ├── components/       # React components</span></span>
<span class="line"><span>│   │   ├── ui/           # Base UI components</span></span>
<span class="line"><span>│   │   ├── molecules/    # Composite components</span></span>
<span class="line"><span>│   │   └── organisms/    # Complex components</span></span>
<span class="line"><span>│   ├── lib/              # Utilities</span></span>
<span class="line"><span>│   │   ├── hooks/        # Custom React hooks</span></span>
<span class="line"><span>│   │   ├── translations/ # i18n files</span></span>
<span class="line"><span>│   │   └── types/        # TypeScript types</span></span>
<span class="line"><span>│   └── services/         # API clients</span></span>
<span class="line"><span>└── public/               # Static assets</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_2-backend-nestjs" tabindex="-1">2. Backend (NestJS) <a class="header-anchor" href="#_2-backend-nestjs" aria-label="Permalink to “2. Backend (NestJS)”">​</a></h3><p><strong>Technology Stack:</strong></p><ul><li><a href="https://nestjs.com/" target="_blank" rel="noreferrer">NestJS</a> - Node.js framework</li><li><a href="https://www.typescriptlang.org/" target="_blank" rel="noreferrer">TypeScript</a> - Type safety</li><li><a href="https://github.com/apocas/dockerode" target="_blank" rel="noreferrer">Dockerode</a> - Docker API client</li><li><a href="https://www.npmjs.com/package/bcrypt" target="_blank" rel="noreferrer">bcrypt</a> - Password hashing</li><li><a href="http://www.passportjs.org/" target="_blank" rel="noreferrer">Passport.js</a> - Authentication</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Expose REST API</li><li>Authenticate users</li><li>Manage Docker containers</li><li>Execute server commands</li><li>Monitor resources</li><li>Handle file operations</li><li>Manage server lifecycle</li></ul><p><strong>Key Features:</strong></p><ul><li>RESTful API design</li><li>JWT authentication</li><li>Docker integration via socket</li><li>Real-time log streaming</li><li>Error handling and validation</li><li>Type-safe with TypeScript</li></ul><p><strong>Directory Structure:</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>backend/</span></span>
<span class="line"><span>├── src/</span></span>
<span class="line"><span>│   ├── main.ts                    # Application entry point</span></span>
<span class="line"><span>│   ├── app.module.ts              # Root module</span></span>
<span class="line"><span>│   ├── auth/                      # Authentication module</span></span>
<span class="line"><span>│   │   ├── auth.controller.ts</span></span>
<span class="line"><span>│   │   ├── auth.service.ts</span></span>
<span class="line"><span>│   │   ├── jwt.strategy.ts</span></span>
<span class="line"><span>│   │   └── local.strategy.ts</span></span>
<span class="line"><span>│   ├── server-management/         # Server management module</span></span>
<span class="line"><span>│   │   ├── server-management.controller.ts</span></span>
<span class="line"><span>│   │   ├── server-management.service.ts</span></span>
<span class="line"><span>│   │   └── dto/</span></span>
<span class="line"><span>│   │       └── server-config.model.ts</span></span>
<span class="line"><span>│   └── docker-compose/            # Docker Compose integration</span></span>
<span class="line"><span>│       ├── docker-compose.service.ts</span></span>
<span class="line"><span>│       └── docker-compose.service.spec.ts</span></span>
<span class="line"><span>└── test/                          # Tests</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>API Endpoints:</strong></p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Authentication</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">login          # Login</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logout         # Logout</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">profile        # Get current user</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Servers</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers             # List all servers</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers             # Create </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id         # Get server details</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PUT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id         # Update server</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id         # Delete server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Server Control</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">start   # Start server</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stop    # Stop server</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">restart # Restart server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Server Data</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logs    # Stream logs</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">command # Execute command</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stats   # Get resource stats</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">servers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">players # Get online players</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_3-filebrowser" tabindex="-1">3. Filebrowser <a class="header-anchor" href="#_3-filebrowser" aria-label="Permalink to “3. Filebrowser”">​</a></h3><p><strong>Technology:</strong></p><ul><li><a href="https://filebrowser.org/" target="_blank" rel="noreferrer">Filebrowser</a> - File management</li></ul><p><strong>Responsibilities:</strong></p><ul><li>Browse server files</li><li>Edit configuration files</li><li>Upload/download files</li><li>Manage permissions</li><li>View file contents</li></ul><p><strong>Integration:</strong></p><ul><li>Runs as separate container</li><li>Accessed via iframe in frontend</li><li>Independent authentication</li><li>Direct file system access</li></ul><h3 id="_4-docker-engine" tabindex="-1">4. Docker Engine <a class="header-anchor" href="#_4-docker-engine" aria-label="Permalink to “4. Docker Engine”">​</a></h3><p><strong>Role:</strong></p><ul><li>Container runtime</li><li>Resource isolation</li><li>Network management</li><li>Volume management</li></ul><p><strong>Docker Socket:</strong> Minepanel communicates with Docker via <code>/var/run/docker.sock</code>:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/var/run/docker.sock:/var/run/docker.sock</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>This allows Minepanel to:</p><ul><li>Create containers</li><li>Start/stop containers</li><li>Monitor containers</li><li>Read logs</li><li>Execute commands</li><li>Manage networks/volumes</li></ul><h3 id="docker-socket-and-path-resolution" tabindex="-1">Docker Socket and Path Resolution <a class="header-anchor" href="#docker-socket-and-path-resolution" aria-label="Permalink to “Docker Socket and Path Resolution”">​</a></h3><p><strong>The Challenge:</strong> When Minepanel (running in a container) creates Minecraft server containers via the Docker socket, volume paths are <strong>interpreted from the host&#39;s perspective</strong>, not from Minepanel&#39;s container.</p><p><strong>Example:</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Minepanel container internal path: /app/servers/my-server</span></span>
<span class="line"><span>Host machine actual path:          /Users/username/minepanel/servers/my-server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Without BASE_DIR (doesn&#39;t work):</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Minepanel generates this docker-compose.yml for a Minecraft server:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./mc-data:/data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ❌ Docker looks for ./mc-data on the HOST</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>When Docker tries to mount <code>./mc-data</code>, it looks for it <strong>relative to where <code>docker compose up</code> runs</strong>, not inside Minepanel&#39;s container. This fails with:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Error: path ./mc-data is not shared from the host</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>With BASE_DIR (works correctly):</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Minepanel knows the host path via BASE_DIR environment variable</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BASE_DIR=/Users/username/minepanel</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Host path</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Generates docker-compose.yml with absolute paths:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/Users/username/minepanel/servers/my-server/mc-data:/data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ✅ Absolute host path</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Now Docker correctly finds the directory on the host machine.</p><p><strong>Implementation:</strong></p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// backend/src/docker-compose/docker-compose.service.ts</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">private </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseVolumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config: ServerConfig): string[] {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.dockerVolumes</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> volume</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> line.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Convert relative paths to absolute paths using BASE_DIR</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (volume.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hostPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">containerParts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> volume.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> containerPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> containerParts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> absoluteHostPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BASE_DIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// e.g., /Users/username/minepanel</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &#39;servers&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          config.id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          hostPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">absoluteHostPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">containerPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> volume;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>Configuration:</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minepanel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BASE_DIR=\${BASE_DIR:-$PWD}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Defaults to current directory</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${BASE_DIR:-$PWD}/servers:/app/servers</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Mount with same BASE_DIR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/var/run/docker.sock:/var/run/docker.sock</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>Key Points:</strong></p><ul><li>✅ <code>BASE_DIR</code> is set to the host&#39;s working directory (typically where docker-compose.yml is located)</li><li>✅ Minepanel mounts <code>\${BASE_DIR}/servers</code> to <code>/app/servers</code> internally</li><li>✅ When creating server containers, Minepanel uses <code>\${BASE_DIR}/servers/server-name</code> for volumes</li><li>✅ Docker socket operations use these absolute host paths correctly</li><li>✅ All containers share the same base directory structure</li></ul><p>This pattern is the same used by <strong>Portainer</strong>, <strong>Yacht</strong>, and other Docker management panels that communicate via the Docker socket.</p><hr><h2 id="data-flow" tabindex="-1">Data Flow <a class="header-anchor" href="#data-flow" aria-label="Permalink to “Data Flow”">​</a></h2><h3 id="creating-a-server" tabindex="-1">Creating a Server <a class="header-anchor" href="#creating-a-server" aria-label="Permalink to “Creating a Server”">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>User                Frontend              Backend              Docker</span></span>
<span class="line"><span>  │                    │                     │                   │</span></span>
<span class="line"><span>  │  Fill form         │                     │                   │</span></span>
<span class="line"><span>  ├──────────────────→ │                     │                   │</span></span>
<span class="line"><span>  │                    │  POST /servers      │                   │</span></span>
<span class="line"><span>  │                    ├────────────────────→│                   │</span></span>
<span class="line"><span>  │                    │                     │  Validate input   │</span></span>
<span class="line"><span>  │                    │                     │  Create config    │</span></span>
<span class="line"><span>  │                    │                     │  Build compose    │</span></span>
<span class="line"><span>  │                    │                     │  docker compose   │</span></span>
<span class="line"><span>  │                    │                     ├──────────────────→│</span></span>
<span class="line"><span>  │                    │                     │                   │ Pull image</span></span>
<span class="line"><span>  │                    │                     │                   │ Create container</span></span>
<span class="line"><span>  │                    │                     │                   │ Start container</span></span>
<span class="line"><span>  │                    │                     │◄──────────────────┤</span></span>
<span class="line"><span>  │                    │◄────────────────────┤                   │</span></span>
<span class="line"><span>  │◄─────────────────────                    │                   │</span></span>
<span class="line"><span>  │  Server created!   │                     │                   │</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="viewing-logs" tabindex="-1">Viewing Logs <a class="header-anchor" href="#viewing-logs" aria-label="Permalink to “Viewing Logs”">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>User                Frontend              Backend              Docker</span></span>
<span class="line"><span>  │                    │                     │                   │</span></span>
<span class="line"><span>  │  View logs         │                     │                   │</span></span>
<span class="line"><span>  ├──────────────────→ │                     │                   │</span></span>
<span class="line"><span>  │                    │  GET /logs          │                   │</span></span>
<span class="line"><span>  │                    ├────────────────────→│                   │</span></span>
<span class="line"><span>  │                    │                     │  docker logs -f   │</span></span>
<span class="line"><span>  │                    │                     ├──────────────────→│</span></span>
<span class="line"><span>  │                    │                     │◄──────────────────┤</span></span>
<span class="line"><span>  │                    │  WebSocket stream   │  Stream logs      │</span></span>
<span class="line"><span>  │                    │◄────────────────────┤                   │</span></span>
<span class="line"><span>  │◄──────────────────────                   │                   │</span></span>
<span class="line"><span>  │  Real-time logs    │                     │                   │</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><h2 id="server-container-structure" tabindex="-1">Server Container Structure <a class="header-anchor" href="#server-container-structure" aria-label="Permalink to “Server Container Structure”">​</a></h2><p>Each Minecraft server runs in its own Docker container using <a href="https://github.com/itzg/docker-minecraft-server" target="_blank" rel="noreferrer">itzg/docker-minecraft-server</a>.</p><h3 id="container-configuration" tabindex="-1">Container Configuration <a class="header-anchor" href="#container-configuration" aria-label="Permalink to “Container Configuration”">​</a></h3><p>Example <code>docker-compose.yml</code> for a server:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  my-server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">itzg/minecraft-server:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">minepanel-my-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      EULA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TRUE&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      TYPE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PAPER&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      VERSION</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.20.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MEMORY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2G&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MAX_PLAYERS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;20&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      DIFFICULTY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;normal&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MODE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;survival&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      PVP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      ONLINE_MODE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;25565:25565&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./servers/my-server:/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;minepanel.server=true&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;minepanel.name=my-server&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;minepanel.type=PAPER&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;minepanel.version=1.20.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="volume-mapping" tabindex="-1">Volume Mapping <a class="header-anchor" href="#volume-mapping" aria-label="Permalink to “Volume Mapping”">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Host                          Container</span></span>
<span class="line"><span>├── servers/</span></span>
<span class="line"><span>│   ├── my-server/           → /data</span></span>
<span class="line"><span>│   │   ├── world/              World files</span></span>
<span class="line"><span>│   │   ├── plugins/            Plugins (Paper/Spigot)</span></span>
<span class="line"><span>│   │   ├── mods/               Mods (Forge/Fabric)</span></span>
<span class="line"><span>│   │   ├── server.properties   Config</span></span>
<span class="line"><span>│   │   ├── ops.json            Operators</span></span>
<span class="line"><span>│   │   └── logs/               Server logs</span></span>
<span class="line"><span>│   └── another-server/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="labels" tabindex="-1">Labels <a class="header-anchor" href="#labels" aria-label="Permalink to “Labels”">​</a></h3><p>Minepanel uses Docker labels to track servers:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minepanel.server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Identifies as managed server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minepanel.name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-server&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Server identifier</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minepanel.type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PAPER&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Server type</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minepanel.version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.20.1&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Minecraft version</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minepanel.created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-10-24&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # Creation date</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h2 id="security-architecture" tabindex="-1">Security Architecture <a class="header-anchor" href="#security-architecture" aria-label="Permalink to “Security Architecture”">​</a></h2><h3 id="authentication-flow" tabindex="-1">Authentication Flow <a class="header-anchor" href="#authentication-flow" aria-label="Permalink to “Authentication Flow”">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>User → Frontend → Backend</span></span>
<span class="line"><span>                    ↓</span></span>
<span class="line"><span>              [Validate credentials]</span></span>
<span class="line"><span>                    ↓</span></span>
<span class="line"><span>            [Generate JWT token]</span></span>
<span class="line"><span>                    ↓</span></span>
<span class="line"><span>              [Return token]</span></span>
<span class="line"><span>                    ↓</span></span>
<span class="line"><span>        [Store in httpOnly cookie]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Security Measures:</strong></p><ul><li>Passwords hashed with bcrypt (12 rounds)</li><li>JWT tokens for stateless authentication</li><li>httpOnly cookies prevent XSS</li><li>CORS protection</li><li>Input validation and sanitization</li></ul><h3 id="docker-socket-access" tabindex="-1">Docker Socket Access <a class="header-anchor" href="#docker-socket-access" aria-label="Permalink to “Docker Socket Access”">​</a></h3><p><strong>Risk:</strong> Direct access to Docker socket = root access</p><p><strong>Mitigation:</strong></p><ul><li>Minepanel container runs with minimal permissions</li><li>Only necessary Docker operations allowed</li><li>Can use Docker Socket Proxy for additional security</li><li>Audit logs for all Docker operations</li></ul><p><strong>Optional: Docker Socket Proxy</strong></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  socket-proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">tecnativa/docker-socket-proxy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/var/run/docker.sock:/var/run/docker.sock</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      CONTAINERS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      IMAGES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      NETWORKS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      VOLUMES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minepanel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      DOCKER_HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">tcp://socket-proxy:2375</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="network-isolation" tabindex="-1">Network Isolation <a class="header-anchor" href="#network-isolation" aria-label="Permalink to “Network Isolation”">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│        Docker Network: bridge        │</span></span>
<span class="line"><span>│                                      │</span></span>
<span class="line"><span>│  ┌──────────┐    ┌──────────┐      │</span></span>
<span class="line"><span>│  │ Minepanel│←──→│Filebrowser│      │</span></span>
<span class="line"><span>│  └──────────┘    └──────────┘      │</span></span>
<span class="line"><span>│                                      │</span></span>
<span class="line"><span>│  ┌──────────┐    ┌──────────┐      │</span></span>
<span class="line"><span>│  │Server 1  │    │Server 2  │      │</span></span>
<span class="line"><span>│  │(isolated)│    │(isolated)│      │</span></span>
<span class="line"><span>│  └──────────┘    └──────────┘      │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Each server runs in isolation:</p><ul><li>Cannot access other servers</li><li>Limited network access</li><li>Resource limits enforced</li><li>Own filesystem namespace</li></ul><hr><h2 id="storage-architecture" tabindex="-1">Storage Architecture <a class="header-anchor" href="#storage-architecture" aria-label="Permalink to “Storage Architecture”">​</a></h2><h3 id="directory-structure" tabindex="-1">Directory Structure <a class="header-anchor" href="#directory-structure" aria-label="Permalink to “Directory Structure”">​</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>minepanel/</span></span>
<span class="line"><span>├── docker-compose.yml          # Main compose file</span></span>
<span class="line"><span>├── .env                        # Environment variables</span></span>
<span class="line"><span>├── servers/                    # All server data</span></span>
<span class="line"><span>│   ├── server-1/</span></span>
<span class="line"><span>│   │   ├── world/              # World save</span></span>
<span class="line"><span>│   │   ├── world_nether/</span></span>
<span class="line"><span>│   │   ├── world_the_end/</span></span>
<span class="line"><span>│   │   ├── plugins/            # Plugins (if applicable)</span></span>
<span class="line"><span>│   │   ├── mods/               # Mods (if applicable)</span></span>
<span class="line"><span>│   │   ├── config/             # Plugin/mod configs</span></span>
<span class="line"><span>│   │   ├── logs/               # Server logs</span></span>
<span class="line"><span>│   │   ├── server.properties</span></span>
<span class="line"><span>│   │   ├── server.jar</span></span>
<span class="line"><span>│   │   └── ...</span></span>
<span class="line"><span>│   ├── server-2/</span></span>
<span class="line"><span>│   └── backups/                # Backup storage</span></span>
<span class="line"><span>│       ├── server-1/</span></span>
<span class="line"><span>│       └── server-2/</span></span>
<span class="line"><span>└── filebrowser-data/           # Filebrowser config</span></span>
<span class="line"><span>    └── filebrowser.db</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="volume-strategy" tabindex="-1">Volume Strategy <a class="header-anchor" href="#volume-strategy" aria-label="Permalink to “Volume Strategy”">​</a></h3><p><strong>Bind Mounts:</strong> Used for server data to allow easy access from host:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./servers/my-server:/data</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Benefits:</strong></p><ul><li>Direct access from host filesystem</li><li>Easy backups</li><li>Simple file transfers</li><li>Debug and inspect files</li></ul><p><strong>Named Volumes:</strong> Could be used for better isolation (future option):</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  my-server-data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  my-server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">my-server-data:/data</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h2 id="scaling-considerations" tabindex="-1">Scaling Considerations <a class="header-anchor" href="#scaling-considerations" aria-label="Permalink to “Scaling Considerations”">​</a></h2><h3 id="vertical-scaling" tabindex="-1">Vertical Scaling <a class="header-anchor" href="#vertical-scaling" aria-label="Permalink to “Vertical Scaling”">​</a></h3><p><strong>Increase resources for existing servers:</strong></p><ul><li>Allocate more RAM</li><li>Add more CPU cores</li><li>Upgrade disk to SSD</li><li>Optimize JVM parameters</li></ul><h3 id="horizontal-scaling" tabindex="-1">Horizontal Scaling <a class="header-anchor" href="#horizontal-scaling" aria-label="Permalink to “Horizontal Scaling”">​</a></h3><p><strong>Run more servers:</strong></p><ul><li>Add more server containers</li><li>Use different ports (25565, 25566, 25567...)</li><li>Share resources efficiently</li><li>Consider network proxies (BungeeCord, Velocity)</li></ul><h3 id="multi-node-setup" tabindex="-1">Multi-Node Setup <a class="header-anchor" href="#multi-node-setup" aria-label="Permalink to “Multi-Node Setup”">​</a></h3><p><strong>Split services across machines (advanced):</strong></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Machine 1: Minepanel + Filebrowser</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Machine 2: Docker Engine → Minecraft Servers</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Use Docker&#39;s remote API:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  DOCKER_HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">tcp://192.168.1.100:2376</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><h2 id="performance-optimizations" tabindex="-1">Performance Optimizations <a class="header-anchor" href="#performance-optimizations" aria-label="Permalink to “Performance Optimizations”">​</a></h2><h3 id="backend-optimizations" tabindex="-1">Backend Optimizations <a class="header-anchor" href="#backend-optimizations" aria-label="Permalink to “Backend Optimizations”">​</a></h3><ol><li><p><strong>Caching</strong></p><ul><li>Cache server list</li><li>Cache resource stats</li><li>Redis for distributed cache (future)</li></ul></li><li><p><strong>Connection Pooling</strong></p><ul><li>Reuse Docker API connections</li><li>Keep-alive for HTTP requests</li></ul></li><li><p><strong>Async Operations</strong></p><ul><li>Non-blocking I/O</li><li>Parallel container operations</li><li>Background tasks for heavy operations</li></ul></li></ol><h3 id="frontend-optimizations" tabindex="-1">Frontend Optimizations <a class="header-anchor" href="#frontend-optimizations" aria-label="Permalink to “Frontend Optimizations”">​</a></h3><ol><li><p><strong>Code Splitting</strong></p><ul><li>Lazy load routes</li><li>Dynamic imports for heavy components</li></ul></li><li><p><strong>Data Fetching</strong></p><ul><li>React Query for caching</li><li>Prefetch data on hover</li><li>Stale-while-revalidate strategy</li></ul></li><li><p><strong>Static Generation</strong></p><ul><li>Pre-render static pages</li><li>ISR for dynamic content</li></ul></li></ol><h3 id="docker-optimizations" tabindex="-1">Docker Optimizations <a class="header-anchor" href="#docker-optimizations" aria-label="Permalink to “Docker Optimizations”">​</a></h3><ol><li><p><strong>Image Caching</strong></p><ul><li>Keep frequently used images</li><li>Pre-pull common versions</li></ul></li><li><p><strong>Resource Limits</strong></p><ul><li>Prevent resource exhaustion</li><li>Fair resource allocation</li></ul></li><li><p><strong>Network Optimization</strong></p><ul><li>Custom bridge networks</li><li>DNS caching</li></ul></li></ol><hr><h2 id="monitoring-observability" tabindex="-1">Monitoring &amp; Observability <a class="header-anchor" href="#monitoring-observability" aria-label="Permalink to “Monitoring &amp; Observability”">​</a></h2><h3 id="logs" tabindex="-1">Logs <a class="header-anchor" href="#logs" aria-label="Permalink to “Logs”">​</a></h3><p><strong>Minepanel Logs:</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minepanel</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Individual Server Logs:</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minepanel-my-server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="metrics" tabindex="-1">Metrics <a class="header-anchor" href="#metrics" aria-label="Permalink to “Metrics”">​</a></h3><p><strong>Container Stats:</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stats</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Resource Usage:</strong></p><ul><li>CPU percentage</li><li>Memory usage / limit</li><li>Network I/O</li><li>Block I/O</li></ul><h3 id="health-checks" tabindex="-1">Health Checks <a class="header-anchor" href="#health-checks" aria-label="Permalink to “Health Checks”">​</a></h3><p>Docker health checks monitor container status:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">healthcheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CMD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;curl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30s</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10s</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  retries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  start_period</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">40s</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h2 id="future-enhancements" tabindex="-1">Future Enhancements <a class="header-anchor" href="#future-enhancements" aria-label="Permalink to “Future Enhancements”">​</a></h2><h3 id="planned-architecture-improvements" tabindex="-1">Planned Architecture Improvements <a class="header-anchor" href="#planned-architecture-improvements" aria-label="Permalink to “Planned Architecture Improvements”">​</a></h3><ol><li><p><strong>Microservices Split</strong></p><ul><li>Separate auth service</li><li>Dedicated metrics service</li><li>Queue for async operations</li></ul></li><li><p><strong>Database Integration</strong></p><ul><li>SQLite for persistent data</li><li>Store server configs</li><li>User management</li><li>Audit logs</li></ul></li><li><p><strong>Message Queue</strong></p><ul><li>RabbitMQ or Redis</li><li>Async task processing</li><li>Event-driven architecture</li></ul></li><li><p><strong>Orchestration</strong></p><ul><li>Kubernetes support</li><li>Docker Swarm mode</li><li>Auto-scaling</li></ul></li><li><p><strong>Observability</strong></p><ul><li>Prometheus metrics</li><li>Grafana dashboards</li><li>Loki for log aggregation</li><li>Jaeger for tracing</li></ul></li></ol><hr><h2 id="technology-choices" tabindex="-1">Technology Choices <a class="header-anchor" href="#technology-choices" aria-label="Permalink to “Technology Choices”">​</a></h2><h3 id="why-next-js" tabindex="-1">Why Next.js? <a class="header-anchor" href="#why-next-js" aria-label="Permalink to “Why Next.js?”">​</a></h3><ul><li>✅ Server-side rendering for better SEO</li><li>✅ File-based routing</li><li>✅ API routes (not used, but available)</li><li>✅ Great developer experience</li><li>✅ Built-in optimizations</li></ul><h3 id="why-nestjs" tabindex="-1">Why NestJS? <a class="header-anchor" href="#why-nestjs" aria-label="Permalink to “Why NestJS?”">​</a></h3><ul><li>✅ TypeScript native</li><li>✅ Modular architecture</li><li>✅ Dependency injection</li><li>✅ Similar to Angular (familiar patterns)</li><li>✅ Extensive ecosystem</li></ul><h3 id="why-docker" tabindex="-1">Why Docker? <a class="header-anchor" href="#why-docker" aria-label="Permalink to “Why Docker?”">​</a></h3><ul><li>✅ Isolation and security</li><li>✅ Consistent environments</li><li>✅ Easy deployment</li><li>✅ Resource control</li><li>✅ Portability</li></ul><h3 id="why-itzg-minecraft-server" tabindex="-1">Why itzg/minecraft-server? <a class="header-anchor" href="#why-itzg-minecraft-server" aria-label="Permalink to “Why itzg/minecraft-server?”">​</a></h3><ul><li>✅ Most popular MC Docker image</li><li>✅ Supports all server types</li><li>✅ Well-maintained</li><li>✅ Extensive documentation</li><li>✅ Active community</li></ul><hr><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to “Next Steps”">​</a></h2><ul><li>🛠️ <a href="/development.html">Development Guide</a> - Contribute to the project</li><li>⚙️ <a href="/configuration.html">Configuration</a> - Customize your setup</li><li>📖 <a href="/features.html">Features</a> - Explore what&#39;s possible</li></ul>`,155)])])}const b=a(p,[["render",r]]);export{g as __pageData,b as default};
